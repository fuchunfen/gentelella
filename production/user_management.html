<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>用户管理</title>

    <!-- Bootstrap -->
    <link href="../vendors/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="../vendors/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <!-- NProgress -->
    <link href="../vendors/nprogress/nprogress.css" rel="stylesheet">
    <!-- iCheck -->
    <link href="../vendors/iCheck/skins/flat/green.css" rel="stylesheet">
    <!-- Datatables -->
    <link href="../vendors/datatables.net-bs/css/dataTables.bootstrap.min.css" rel="stylesheet">
    <link href="../vendors/datatables.net-buttons-bs/css/buttons.bootstrap.min.css" rel="stylesheet">
    <link href="../vendors/datatables.net-fixedheader-bs/css/fixedHeader.bootstrap.min.css" rel="stylesheet">
    <link href="../vendors/datatables.net-responsive-bs/css/responsive.bootstrap.min.css" rel="stylesheet">
    <link href="../vendors/datatables.net-scroller-bs/css/scroller.bootstrap.min.css" rel="stylesheet">

    <!-- Custom Theme Style -->
    <link href="../build/css/custom.min.css" rel="stylesheet">

    <style>
      #topPlugin{
        float: right;
        margin-bottom: 10px;
      }
    </style>

  </head>

  <body class="nav-md">
    <div class="container body">
      <div class="main_container">
        <div class="col-md-3 left_col">
          <div class="left_col scroll-view">
            <div class="navbar nav_title" style="border: 0;">
              <a href="index.html" class="site_title"><i class="fa fa-paw"></i> <span>Gentellela Alela!</span></a>
            </div>

            <div class="clearfix"></div>

            <!-- menu profile quick info -->
            <div class="profile">
              <div class="profile_pic">
                <img src="images/img.jpg" alt="..." class="img-circle profile_img">
              </div>
              <div class="profile_info">
                <span>Welcome,</span>
                <h2>John Doe</h2>
              </div>
            </div>
            <!-- /menu profile quick info -->

            <br/>

            <!-- sidebar menu -->
            <div id="sidebar-menu" class="main_menu_side hidden-print main_menu">
              <div class="menu_section">
                <h3>General</h3>
                <ul class="nav side-menu">
                  <li><a><i class="fa fa-home"></i> 主页 <!--<span class="fa fa-chevron-down"></span>--></a>
                    <!--<ul class="nav child_menu">
                      <li><a href="index.html">Dashboard</a></li>
                      <li><a href="index2.html">Dashboard2</a></li>
                      <li><a href="index3.html">Dashboard3</a></li>
                    </ul>-->
                  </li>
                  <li><a><i class="fa fa-cutlery"></i> 菜品管理</a></li>
                  <li><a><i class="fa fa-sitemap"></i> 分类管理</a></li>
                  <li><a href="access_control.html"><i class="fa fa-legal"></i> 权限管理</a></li>
                  <li><a href="user_management.html"><i class="fa fa-users"></i> 用户管理</a></li>
                  <!--<li><a><i class="fa fa-edit"></i> Forms <span class="fa fa-chevron-down"></span></a>
                    <ul class="nav child_menu">
                      <li><a href="form.html">General Form</a></li>
                      <li><a href="form_advanced.html">Advanced Components</a></li>
                      <li><a href="form_validation.html">Form Validation</a></li>
                      <li><a href="form_wizards.html">Form Wizard</a></li>
                      <li><a href="form_upload.html">Form Upload</a></li>
                      <li><a href="form_buttons.html">Form Buttons</a></li>
                    </ul>
                  </li>
                  <li><a><i class="fa fa-desktop"></i> UI Elements <span class="fa fa-chevron-down"></span></a>
                    <ul class="nav child_menu">
                      <li><a href="general_elements.html">General Elements</a></li>
                      <li><a href="media_gallery.html">Media Gallery</a></li>
                      <li><a href="typography.html">Typography</a></li>
                      <li><a href="icons.html">Icons</a></li>
                      <li><a href="glyphicons.html">Glyphicons</a></li>
                      <li><a href="widgets.html">Widgets</a></li>
                      <li><a href="invoice.html">Invoice</a></li>
                      <li><a href="inbox.html">Inbox</a></li>
                      <li><a href="calendar.html">Calendar</a></li>
                    </ul>
                  </li>
                  <li><a><i class="fa fa-table"></i> Tables <span class="fa fa-chevron-down"></span></a>
                    <ul class="nav child_menu">
                      <li><a href="tables.html">Tables</a></li>
                      <li><a href="tables_dynamic.html">Table Dynamic</a></li>
                    </ul>
                  </li>
                  <li><a><i class="fa fa-bar-chart-o"></i> Data Presentation <span class="fa fa-chevron-down"></span></a>
                    <ul class="nav child_menu">
                      <li><a href="chartjs.html">Chart JS</a></li>
                      <li><a href="chartjs2.html">Chart JS2</a></li>
                      <li><a href="morisjs.html">Moris JS</a></li>
                      <li><a href="echarts.html">ECharts</a></li>
                      <li><a href="other_charts.html">Other Charts</a></li>
                    </ul>
                  </li>
                  <li><a><i class="fa fa-clone"></i>Layouts <span class="fa fa-chevron-down"></span></a>
                    <ul class="nav child_menu">
                      <li><a href="fixed_sidebar.html">Fixed Sidebar</a></li>
                      <li><a href="fixed_footer.html">Fixed Footer</a></li>
                    </ul>
                  </li>-->
                </ul>
              </div>
              <!-- <div class="menu_section">
                 <h3>Live On</h3>
                 <ul class="nav side-menu">
                   <li><a><i class="fa fa-bug"></i> Additional Pages <span class="fa fa-chevron-down"></span></a>
                     <ul class="nav child_menu">
                       <li><a href="e_commerce.html">E-commerce</a></li>
                       <li><a href="projects.html">Projects</a></li>
                       <li><a href="project_detail.html">Project Detail</a></li>
                       <li><a href="contacts.html">Contacts</a></li>
                       <li><a href="profile.html">Profile</a></li>
                     </ul>
                   </li>
                   <li><a><i class="fa fa-windows"></i> Extras <span class="fa fa-chevron-down"></span></a>
                     <ul class="nav child_menu">
                       <li><a href="page_403.html">403 Error</a></li>
                       <li><a href="page_404.html">404 Error</a></li>
                       <li><a href="page_500.html">500 Error</a></li>
                       <li><a href="plain_page.html">Plain Page</a></li>
                       <li><a href="login.html">Login Page</a></li>
                       <li><a href="pricing_tables.html">Pricing Tables</a></li>
                     </ul>
                   </li>
                   <li><a><i class="fa fa-sitemap"></i> Multilevel Menu <span class="fa fa-chevron-down"></span></a>
                     <ul class="nav child_menu">
                         <li><a href="#level1_1">Level One</a>
                         <li><a>Level One<span class="fa fa-chevron-down"></span></a>
                           <ul class="nav child_menu">
                             <li class="sub_menu"><a href="level2.html">Level Two</a>
                             </li>
                             <li><a href="#level2_1">Level Two</a>
                             </li>
                             <li><a href="#level2_2">Level Two</a>
                             </li>
                           </ul>
                         </li>
                         <li><a href="#level1_2">Level One</a>
                         </li>
                     </ul>
                   </li>
                   <li><a href="javascript:void(0)"><i class="fa fa-laptop"></i> Landing Page <span class="label label-success pull-right">Coming Soon</span></a></li>
                 </ul>
               </div>-->

            </div>
            <!-- /sidebar menu -->

            <!-- /menu footer buttons -->
            <!-- <div class="sidebar-footer hidden-small">
               <a data-toggle="tooltip" data-placement="top" title="Settings">
                 <span class="glyphicon glyphicon-cog" aria-hidden="true"></span>
               </a>
               <a data-toggle="tooltip" data-placement="top" title="FullScreen">
                 <span class="glyphicon glyphicon-fullscreen" aria-hidden="true"></span>
               </a>
               <a data-toggle="tooltip" data-placement="top" title="Lock">
                 <span class="glyphicon glyphicon-eye-close" aria-hidden="true"></span>
               </a>
               <a data-toggle="tooltip" data-placement="top" title="Logout">
                 <span class="glyphicon glyphicon-off" aria-hidden="true"></span>
               </a>
             </div>-->
            <!-- /menu footer buttons -->
          </div>
        </div>

        <!-- top navigation -->
        <div class="top_nav">
          <div class="nav_menu">
            <nav>
              <div class="nav toggle">
                <a id="menu_toggle"><i class="fa fa-bars"></i></a>
              </div>

              <ul class="nav navbar-nav navbar-right">
                <li class="">
                  <a href="javascript:;" class="user-profile dropdown-toggle" data-toggle="dropdown"
                     aria-expanded="false">
                    <img src="images/img.jpg" alt="">John Doe
                    <span class=" fa fa-angle-down"></span>
                  </a>
                  <ul class="dropdown-menu dropdown-usermenu pull-right">
                    <li><a href="javascript:;"> Profile</a></li>
                    <li>
                      <a href="javascript:;">
                        <span class="badge bg-red pull-right">50%</span>
                        <span>Settings</span>
                      </a>
                    </li>
                    <li><a href="javascript:;">Help</a></li>
                    <li><a href="login.html"><i class="fa fa-sign-out pull-right"></i> Log Out</a></li>
                  </ul>
                </li>

                <li role="presentation" class="dropdown">
                  <a href="javascript:;" class="dropdown-toggle info-number" data-toggle="dropdown"
                     aria-expanded="false">
                    <i class="fa fa-envelope-o"></i>
                    <span class="badge bg-green">6</span>
                  </a>
                  <ul id="menu1" class="dropdown-menu list-unstyled msg_list" role="menu">
                    <li>
                      <a>
                        <span class="image"><img src="images/img.jpg" alt="Profile Image"/></span>
                        <span>
                          <span>John Smith</span>
                          <span class="time">3 mins ago</span>
                        </span>
                        <span class="message">
                          Film festivals used to be do-or-die moments for movie makers. They were where...
                        </span>
                      </a>
                    </li>
                    <li>
                      <a>
                        <span class="image"><img src="images/img.jpg" alt="Profile Image"/></span>
                        <span>
                          <span>John Smith</span>
                          <span class="time">3 mins ago</span>
                        </span>
                        <span class="message">
                          Film festivals used to be do-or-die moments for movie makers. They were where...
                        </span>
                      </a>
                    </li>
                    <li>
                      <a>
                        <span class="image"><img src="images/img.jpg" alt="Profile Image"/></span>
                        <span>
                          <span>John Smith</span>
                          <span class="time">3 mins ago</span>
                        </span>
                        <span class="message">
                          Film festivals used to be do-or-die moments for movie makers. They were where...
                        </span>
                      </a>
                    </li>
                    <li>
                      <a>
                        <span class="image"><img src="images/img.jpg" alt="Profile Image"/></span>
                        <span>
                          <span>John Smith</span>
                          <span class="time">3 mins ago</span>
                        </span>
                        <span class="message">
                          Film festivals used to be do-or-die moments for movie makers. They were where...
                        </span>
                      </a>
                    </li>
                    <li>
                      <div class="text-center">
                        <a>
                          <strong>See All Alerts</strong>
                          <i class="fa fa-angle-right"></i>
                        </a>
                      </div>
                    </li>
                  </ul>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <!-- /top navigation -->

        <!-- page content -->
        <div class="right_col" role="main">
          <div class="">
            <div class="page-title">
              <div class="title_left">
                <h3></h3>
              </div>

             <!-- <div class="title_right">
                <div class="col-md-5 col-sm-5 col-xs-12 form-group pull-right top_search">
                  <div class="input-group">
                    <input type="text" class="form-control" placeholder="Search for...">
                    <span class="input-group-btn">
                      <button class="btn btn-default" type="button">Go!</button>
                    </span>
                  </div>
                </div>
              </div>-->
            </div>

            <div class="clearfix"></div>

            <div class="row">
              <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="x_panel">
                  <div class="x_title">
                    <h2>用户管理</h2>
                    <ul class="nav navbar-right panel_toolbox">
                      <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                      </li>
                      <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                        <ul class="dropdown-menu" role="menu">
                          <li><a href="#">Settings 1</a>
                          </li>
                          <li><a href="#">Settings 2</a>
                          </li>
                        </ul>
                      </li>
                      <li><a class="close-link"><i class="fa fa-close"></i></a>
                      </li>
                    </ul>
                    <div class="clearfix"></div>
                  </div>
                  <div class="x_content">
                    <p class="text-muted font-13 m-b-30">

                    </p>
                    <table id="datatable" class="table table-striped table-bordered">
                      <thead>
                        <tr>
                          <th><input type="checkbox" name="allChecked" /></th>
                          <th>id</th>
                          <th>Name</th>
                          <th>Position</th>
                          <th>Office</th>
                          <th>Start date</th>
                          <th>Salary</th>
                          <th>操作</th>
                        </tr>
                      </thead>


                     <tbody></tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- /page content -->

        <!-- footer content -->
        <footer>
          <div class="pull-right">
            ©SpanerX后台管理系统 SpannerX 2016
          </div>
          <div class="clearfix"></div>
        </footer>
        <!-- /footer content -->
      </div>
    </div>
    <!--单个删除确认对话框-->
    <div class="modal fade" id="deleteOneModal" tabindex="-1" role="dialog"
         aria-labelledby="myModalLabel" aria-hidden="true" > <!-- data-backdrop="static" 禁止点击弹框后面内容 -->
      <form class="form-horizontal" role="form">
        <div class="modal-dialog modal-sm " > <!-- modal-sm 小的  modal-lg 大的 -->
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close"
                      data-dismiss="modal" aria-hidden="true">
                &times;
              </button>
              <h4 class="modal-title" id="myModalLabel">
                提示信息
              </h4>
            </div>
            <div class="modal-body" style="text-align: left;">
              <h5>您确定要删除当前信息吗？</h5>
            </div>
            <div class="modal-footer">
              <!--
                  <button type="button" class="btn btn-default"
                          data-dismiss="modal">取消
                  </button>
                   -->
              <button type="button" class="btn btn-primary" id="delSubmit">
                确认
              </button>
            </div>
          </div><!-- /.modal-content -->
        </div>
      </form>
    </div>

    <!--单个修改用户信息对话框-->
    <div class="modal fade" id="modifyOneModal" tabindex="-1" role="dialog"
         aria-labelledby="modifyOneLabel" aria-hidden="true" > <!-- data-backdrop="static" 禁止点击弹框后面内容 -->
      <form class="form-horizontal" role="form">
        <div class="modal-dialog " > <!-- modal-sm 小的  modal-lg 大的 -->
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close"
                      data-dismiss="modal" aria-hidden="true">
                &times;
              </button>
              <h4 class="modal-title" id="modifyOneLabel">
                修改信息
              </h4>
            </div>
            <div class="modal-body" style="text-align: left;">
              <div class="form-group">
                <label class="col-sm-3 control-label no-padding-right" >用户名： </label>

                <div class="col-sm-9">
                  <input type="text"  class="form-control" id="modify_username"  name="name" style="width: 250px" maxlength="15" placeholder="10个汉字以内" />

                </div>
              </div>
            </div>
            <div class="modal-footer">
              <!--
                  <button type="button" class="btn btn-default"
                          data-dismiss="modal">取消
                  </button>
                   -->
              <button type="button" class="btn btn-primary" id="modifySubmit">
                确认
              </button>
            </div>
          </div><!-- /.modal-content -->
        </div>
      </form>
    </div>
    <!--新增用户modal-->
    <div class="modal fade" id="addUserModal" tabindex="-1" role="dialog"
         aria-labelledby="addUserModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close"
                    data-dismiss="modal" aria-hidden="true">
              &times;
            </button>
            <h4 class="modal-title" id="addUserModalLabel">
              新 增
            </h4>
          </div>
          <form class="form-horizontal" role="form" action="/category_add" method="post"  id="category_add">
            <div class="modal-body">

              <!--<div class="form-group">
                <label class="col-sm-3 control-label no-padding-right" >图 片：</label>
                <div class="col-sm-5">
                  <input  type="file" name="img1" class="file" id="img1"  style="width:180px; float: left" />
                </div>
                <div class="col-sm-3">
                  <input class="btn btn-sm btn-info" type="button" value="上传" id="uploadimg"/><span id="t"></span>
                </div>
                <input name="categoryImg" type="hidden" id="imageUrl" />
              </div>-->

              <div class="form-group">
                <label class="col-sm-3 control-label no-padding-right" >用户名： </label>

                <div class="col-sm-9">
                  <input type="text"  class="form-control" id="add_username"  name="name" style="width: 250px" maxlength="15" placeholder="" />

                </div>
              </div>


              <div class="form-group">
                <label class="col-sm-3 control-label no-padding-right" >密码： </label>

                <div class="col-sm-9">
                  <input type="password"   class="form-control"  name="password" id="password" style="width: 250px" maxlength="3"/>
                </div>
              </div>



            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default"
                      data-dismiss="modal">关闭
              </button>
              <button type="button" class="btn btn-primary" id="addUserSubmit">
                提交
              </button>
            </div>
          </form>
        </div><!-- /.modal-content -->
      </div>
    </div>
    <!-- jQuery -->
    <script src="../vendors/jquery/dist/jquery.min.js"></script>
    <!-- Bootstrap -->
    <script src="../vendors/bootstrap/dist/js/bootstrap.min.js"></script>
    <!-- FastClick -->
    <script src="../vendors/fastclick/lib/fastclick.js"></script>
    <!-- NProgress -->
    <script src="../vendors/nprogress/nprogress.js"></script>
    <!-- Datatables -->
    <script src="../vendors/datatables.net/js/jquery.dataTables.min.js"></script>
    <script src="../vendors/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>
    <script src="../vendors/datatables.net-buttons/js/dataTables.buttons.min.js"></script>
    <script src="../vendors/datatables.net-buttons-bs/js/buttons.bootstrap.min.js"></script>
    <script src="../vendors/datatables.net-buttons/js/buttons.flash.min.js"></script>
    <script src="../vendors/datatables.net-buttons/js/buttons.html5.min.js"></script>
    <script src="../vendors/datatables.net-buttons/js/buttons.print.min.js"></script>
    <script src="../vendors/datatables.net-fixedheader/js/dataTables.fixedHeader.min.js"></script>
    <script src="../vendors/datatables.net-keytable/js/dataTables.keyTable.min.js"></script>
    <script src="../vendors/datatables.net-responsive/js/dataTables.responsive.min.js"></script>
    <script src="../vendors/datatables.net-responsive-bs/js/responsive.bootstrap.js"></script>
    <script src="../vendors/datatables.net-scroller/js/datatables.scroller.min.js"></script>
    <script src="../vendors/jszip/dist/jszip.min.js"></script>
    <script src="../vendors/pdfmake/build/pdfmake.min.js"></script>
    <script src="../vendors/pdfmake/build/vfs_fonts.js"></script>

    <!-- Custom Theme Scripts -->
    <script src="../build/js/custom.min.js"></script>

    <!-- Datatables -->
    <script>
      $(document).ready(function() {


       /* $('#datatable').dataTable();*/
        var mytable = $('#datatable').DataTable({
          "aLengthMenu":[10,20,40,60,100],
          "searching":false,//禁用搜索
          "lengthChange":true,
          "paging": true,//开启表格分页
          "bProcessing" : true,
          "bServerSide" : false,
          "bAutoWidth" : false,
          "sort" : "position",
          "deferRender":true,//延迟渲染
          "bStateSave" : true, //在第三页刷新页面，会自动到第一页
          "iDisplayLength" : 10,
          "iDisplayStart" : 0,
          "dom": '<l<\'#topPlugin\'>f>rt<ip><"clear">',
          "ordering": false,//全局禁用排序
          "ajax": {
            "type": "GET",
            "url":"userData.txt",
            "dataSrc": function ( json ) {
              /*for ( var i=0, ien=json.length ; i<ien ; i++ ) {
                json[i][0] = '<a href="/message/'+json[i][0]+'>View message</a>';
              }*/
              return json.pageData;
            }

          },
          "aoColumns" : [{
            "mData" : "id",
            "orderable": false , // 禁用排序
            "sDefaultContent" : "",
            "sWidth" : "2%"
          },{
            "mData" : "id",
            "orderable" : false, // 禁用排序
            "sDefaultContent" : "",
            "sWidth" : "6%",

          },{
            "mData" : "name",
            "orderable" : false, // 禁用排序
            "sDefaultContent" : "",
            "sWidth" : "10%",

          }, {
            "mData" : "position",
            "orderable" : false, // 禁用排序
            "sDefaultContent" : "",
            "sWidth" : "10%"
          }, {
            "mData" : "office",
            "orderable" : false, // 禁用排序
            "sDefaultContent" : "",
            "sWidth" : "10%"
          },{
            "mData" : "start_date",
            "orderable" : false, // 禁用排序
            "sDefaultContent" : "",
            "sWidth" : "10%"

          },{
            "mData" : "salary",
            "orderable" : false, // 禁用排序
            "sDefaultContent" : "",
            "sWidth" : "10%"

          },
            {
              "mData" : "id",
              "orderable" : false, // 禁用排序
              "sDefaultContent" : '',
              "sWidth" : "10%",
              "render":function(data, type, full, meta){
                return	data='<button id="deleteOne" class="btn btn-danger btn-sm" data-id='+data+'>删 除</button>' +
                        '<button id="modifyOne" class="btn btn-primary btn-sm" data-id='+data+'>修改</button>';

              }
            }],
          "columnDefs" :
                  [{
                    "orderable" : false, // 禁用排序
                    "targets" : [0], // 指定的列
                    "data" : "id",
                    "render" : function(data, type, full, meta) {
                      return '<input type="checkbox" value="'+ data + '" name="id"/>';
                    }
                  }],
          "oLanguage" : { // 国际化配置
            "sProcessing" : "正在获取数据，请稍后...",
            "sLengthMenu" : "显示 _MENU_ 条",
            "sZeroRecords" : "没有找到数据",
            "sInfo" : "从 _START_ 到  _END_ 条记录 总记录数为 _TOTAL_ 条",
            "sInfoEmpty" : "记录数为0",
            "sInfoFiltered" : "(全部记录数 _MAX_ 条)",
            "sInfoPostFix" : "",
            "sSearch" : "搜索",
            "sUrl" : "",
            "oPaginate" : {
              "sFirst" : "第一页",
              "sPrevious" : "上一页",
              "sNext" : "下一页",
              "sLast" : "最后一页"
            }
          },
          "initComplete":initComplete
         /* "drawCallback": function( settings ) {
            $('input[name=allChecked]')[0].checked=false;//取消全选状态
          }*/
        });

        function initComplete(data){
          //上方topPlugin DIV中追加HTML
          //var topPlugin='<button id="addButton" class="btn btn-success btn-sm" data-toggle="modal" data-target="#addUser" style="display:block;">' +
          // '<span class="glyphicon glyphicon-plus" aria-hidden="true"></span>添加用户</button>';

          //删除用户按钮的HTMLDOM
         /* var topPlugin='<button   class="btn btn-danger btn-sm" id="deleteAll">批量删除</button> <button   class="btn btn-primary btn-sm addBtn" >新 增</button>             <iframe id="exp" style="display:none;"></iframe><button  class="btn btn-info btn-sm" id="expCsv">导 出全部</button>             <button  class="btn btn-warning btn-sm" id="reset">重置搜索条件</button>' ;*/
          var topPlugin='<button class="btn btn-primary btn-sm" id="addUserBtn">新 增</button><button class="btn btn-danger btn-sm" id="deleteAll">批量删除</button><button  class="btn btn-info btn-sm" id="expCsv">导出全部</button>' ;
          $("#topPlugin").append(topPlugin);//在表格上方topPlugin DIV中追加HTML

          //$("#expCsv").on("click", exp1);//给下方按钮绑定事件

        }

        /**
         * 单行删除按钮点击事件响应
         */

        $(document).delegate('#deleteOne','click',function() {
          var id=$(this).data("id");
          $("#delSubmit").val(id);
          console.log("将要删除的id:"+id);
          $("#deleteOneModal").modal('show');
        });

        /**
         * 行内修改按钮点击事件响应
         */

        $(document).delegate('#modifyOne','click',function() {
         /* var id=$(this).data("id");
          $("#modifySubmit").val(id);

          */
          var item = mytable.row($(this).closest('tr')).data();
          $('#modify_username').val(item.name);
          $("#modifyOneModal").modal('show');
        });
        $('#datatable').on( 'click', 'tbody tr', function () {
          var item = mytable.row($(this).closest('tr')).data();
          console.log("当前行："+item);
        } );

        /**
         * 点击确认删除按钮
         */
        $(document).delegate('#delSubmit','click',function(){
          var id=$(this).val();
          $('#deleteOneModal').modal('hide');
          $.ajax({
            url:"",
            async:true,
            type:"GET",
            dataType:"json",
            cache:false,    //不允许缓存
            success: function(data){
              var obj = eval(data);
              if(obj.code==1)
              {

                window.location.reload();
              }
              else
              {
                alert("删除失败");
              }

            },
            error:function(data){
              alert("请求异常");
            }
          });
        });
        /**
         * 多选选中和取消选中,同时选中第一个单元格单选框,并联动全选单选框
         */
        /*$('#datatable tbody').on('click', 'tr', function(event) {
          var allChecked=$('input[name=allChecked]')[0];//关联全选单选框
          $($(this).children()[0]).children().each(function(){
            if(this.type=="checkbox" && (!$(event.target).is(":checkbox") && $(":checkbox",this).trigger("click"))){
              if(!this.checked){
                this.checked = true;
                addValue(this);
                var selected=table.rows('.selected').data().length;//被选中的行数
                //全选单选框的状态处理
                var recordsDisplay=table.page.info().recordsDisplay;//搜索条件过滤后的总行数
                var iDisplayStart=table.page.info().start;// 起始行数
                if(selected === table.page.len()||selected === recordsDisplay||selected === (recordsDisplay - iDisplayStart)){
                  allChecked.checked = true;
                }
              }else{
                this.checked = false;
                cancelValue(this);
                allChecked.checked = false;
              }
            }
          });
          $(this).toggleClass('selected');//放在最后处理，以便给checkbox做检测
        });*/

        /**
         * 全选按钮被点击事件
         */
       /* $('input[name=allChecked]').click(function(){
          if(this.checked){
            $('#datatable tbody tr').each(function(){
              if(!$(this).hasClass('selected')){
                $(this).click();
              }
            });
          }else{
            $('#datatable tbody tr').click();
          }
        });*/
        var $table = $('#datatable');
        $table.on("change",":checkbox",function() {
          if ($(this).is("[name='allChecked']")) {
            //全选
            $(":checkbox",$table).prop("checked",$(this).prop("checked"));
          }else{
            //一般复选
            var checkbox = $("tbody :checkbox",$table);
            $(":checkbox[name='allChecked']",$table).prop('checked', checkbox.length == checkbox.filter(':checked').length);
          }
        })

        /**
         * 单选框被选中时将它的value放入隐藏域
         */
        function addValue(para) {
          var userIds = $("input[name=userIds]");
          if(userIds.val() === ""){
            userIds.val($(para).val());
          }else{
            userIds.val(userIds.val()+","+$(para).val());
          }
        }

        /**
         * 单选框取消选中时将它的value移除隐藏域
         */
        function cancelValue(para){
          //取消选中checkbox要做的操作
          var userIds = $("input[name=allChecked]");
          var array = userIds.val().split(",");
          userIds.val("");
          for (var i = 0; i < array.length; i++) {
            if (array[i] === $(para).val()) {
              continue;
            }
            if (userIds.val() === "") {
              userIds.val(array[i]);
            } else {
              userIds.val(userIds.val() + "," + array[i]);
            }
          }
        }

        $(document).delegate('#expCsv','click',function() {

          /*$("#exp").attr("src",contextPath+"/department/export.do?t=" + new Date().getTime());*/
        });

        $(document).delegate('#addUserBtn','click',function() {

          $('#addUserModal').modal('show');
        });
        $(document).delegate('#deleteAll','click',function() {
          var theArray=[];
          $("input[name=id]:checked").each(function() {
            theArray.push($(this).val());
          });
          if(theArray.length<1){
            alert("请至少选择一个");
          }else{
            alert(theArray);
          }

        });
      });



    </script>
    <!-- /Datatables -->



  </body>
</html>